# Получение текста из бегущей строки видео потока

## Принцип работы

1. Получение скриншотов из видео потока, отдельным скриптом
2. Парсинг файлов скриншотов и получение текста с картинки, скриптом ```screenshot_parser.py```

# 1. Получение скриншотов из видео потока

В разработке...

# 2. Парсинг файлов скриншотов и получение текста с картинки

## Скриншоты размещаются в каталоге screenshots

Каждый файл представляет собой фотографию содержащую текст. Текст должен быть читаем, если плохого качества, распознавание будет плохим.

## Обходит указанный каталог и возвращает список полных путей ко всем файлам.

Получаем каждый файл и передаем на распознавание

## Каждый файл передаем на распознание текст на картинке и возвращаем строку

Распознавание происходит с помощью библиотеки ```easyocr``` (после установки проект увеличивается в объеме на 1,5 Гб) После первого запуска скачивается необходимая модель в зависимости от ```easyocr.Reader(['ru'], gpu=True)``` указанного языка (необходимо время, в последующие разы это не требуется), если не указывать ```gpu=True``` автоматически определяется, есть ли возможность использовать видеокарту, если нет то используется CPU

```TODO:``` Необходимо добавить удаление отработанных файлов

Полученный текст передается далее для вставки в таблицу

## Вставляем строку в таблицу public.running_strings

Для проекта необходима база данных PostgreSQL  

Для работы необходима таблица с такой структурой

```
CREATE TABLE public.running_strings (
  id serial NOT NULL,
  time_c timestamp NULL,
  "text" text NULL
);
```

## Опции работы скрипта

В скрипте есть переменная ```debug``` если равняется ```True``` то в консоль выводится отладочная информация

